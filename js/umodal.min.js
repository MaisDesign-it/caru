$(document).ready(function(){function o(){$("body").removeClass("umodal-disable-scroll").css({paddingRight:0}),$(".umodal_show").css({paddingRight:0}),$(window).scrollTop(umodalScrollTop)}$(window).resize(function(){$(".umodal_show .umodal__image").css("max-height","initial").css("max-height",$(".umodal_show .umodal__content").height()+"px")}),$(".umodal__open").on("click",function(a){a.preventDefault();var d=window.innerWidth-$(document).width();window.umodalScrollTop=$(window).scrollTop(),setTimeout(function(){$("body").addClass("umodal-disable-scroll").css({paddingRight:d,top:-umodalScrollTop}),$(".umodal_show").css({paddingRight:d})},200);var l=$(this).attr("umodal-id"),s=$(this).attr("umodal-src"),i=$(this).attr("href"),e=$(this).attr("umodal-content");if(void 0!=i)var t=i.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jpg|jpeg|png|bmp|gif|webp|ico|svg)((\?|#).*)?$)/i);if(void 0==s&&null==t)$('.umodal[umodal-id="'+l+'"]').addClass("umodal_show").hide().fadeIn(200),$(".umodal__close").click(function(){$(this).closest(".umodal").fadeOut(200,function(){$(this).removeClass("umodal_show")}),o()});else{$('<div class="umodal"><div class="umodal__inner"><button class="umodal__close"></button><div class="umodal__content"></div></div></div>').appendTo("body").hide().addClass("umodal_show umodal_loading").fadeIn(200);var m=$(".umodal_show .umodal__content");void 0==s?($(".umodal_show").addClass("umodal_inverse umodal_image"),m.html('<img src="'+i+'" class="umodal__image">'),m.children(".umodal__image").on("load",function(){$(".umodal__image").addClass("umodal__image_show"),setTimeout(function(){$(".umodal_show").removeClass("umodal_loading")},30),$(window).resize()}),m.children(".umodal__image").on("error",function(){m.html("Не удалось загрузить изображение").fadeIn(200),$(".umodal_show").removeClass("umodal_loading")})):void 0!=e?m.hide().load(s+" "+e,function(o,a,d){"error"==a&&$(this).html("There is an error: "+d.status+" "+d.statusText),$(this).fadeIn(200),$(".umodal_show").removeClass("umodal_loading")}):(m.hide(),$.ajax({url:s,type:"GET",success:function(o){var a=o.replace(/\r\n|\r|\n/g,"").match("<body[^>]*>(.*?)</body>")[0];m.html(a).fadeIn(200),$(".umodal_show").removeClass("umodal_loading")},error:function(o){m.html("Failed to load content").fadeIn(200),$(".umodal_show").removeClass("umodal_loading")}})),$(".umodal_show .umodal__close").click(function(){$(this).closest(".umodal").fadeOut(200,function(){$(this).remove()}),o()})}$(".umodal__close").attr("title","Close [Esc]"),$(document).keyup(function(o){27===o.keyCode&&$(".umodal_show .umodal__close").click()})})});
